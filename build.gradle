plugins {
    id 'java'
    id 'application'
    id 'com.palantir.graal' version '0.7.2'
}

sourceCompatibility = '11'
targetCompatibility = '11'

repositories {
    jcenter()
}

dependencies {
    implementation('com.sun.mail:gimap:2.0.0') {
        exclude module: 'mailapi'
        exclude module: 'imap'
    }
    implementation 'com.sun.mail:jakarta.mail:2.0.0'
}

application {
    mainClassName = 'com.github.nicolasalbert.gmailforwarder.App'
}

startScripts {
    defaultJvmOpts = ['-Xms16m', '-Xmx16m']
}

graal {
    javaVersion '11'
    mainClass 'com.github.nicolasalbert.gmailforwarder.App'
    outputName 'gmail-forwarder'
    option '--no-fallback'
    option '--static'
    option '--libc=musl'
}